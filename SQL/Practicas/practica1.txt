CREATE TABLE Equipo(
    Codigo INTEGER PRIMARY KEY,
    Nombre VARCHAR2(40),
    Estadio VARCHAR2(40),
    Aforo INTEGER DEFAULT(0),
    Ciudad VARCHAR2(40),
    DNI_Pres CHAR(9)
);

CREATE TABLE Presidente(
    DNI CHAR(9) PRIMARY KEY,
    Nombre VARCHAR2(40),
    Apellidos VARCHAR2(80),
    FechaElec DATE,
    FechaNac DATE
);

CREATE TABLE Partido(
    Codigo INTEGER PRIMARY KEY,
    Fecha DATE NOT NULL,
    EquipoLoc INTEGER,
    EquipoVis INTEGER,
    Duracion INTEGER
);
CREATE TABLE Jugador(
    Codigo INTEGER PRIMARY KEY,
    Nombre VARCHAR2(40),
    Posicion VARCHAR2(40),
    FechaNac DATE,
    FechaAlta DATE DEFAULT SYSDATE
);
CREATE TABLE marca_gol(
    CodPar INTEGER,
    CodJug INTEGER,
    Minuto INTEGER,
    Descripcion VARCHAR2(40)
);
ALTER TABLE marca_gol ADD(
    CONSTRAINT PK_mg PRIMARY KEY (CodPar,CodJug),
    CONSTRAINT FK_mg1 FOREIGN KEY (CodPar) REFERENCES Partido(Codigo),
    CONSTRAINT FK_mg2 FOREIGN KEY (CodJug) REFERENCES Jugador(Codigo)
    
);
ALTER TABLE Partido ADD(
    CONSTRAINT FK_Par1 FOREIGN KEY (EquipoLoc,EquiposVis) REFERENCES Equipo(Codigo),
    CONSTRAINT CH_Par CHECK (TO_CHAR(Fecha,'MMDD') NOT BETWEEN '0621' AND '0921'),
    CONSTRAINT CH_Equ CHECK (EquipoLoc <> EquipoVis),
    CONSTRAINT CH_Equ1 CHECK ()
);
ALTER TABLE Equipo ADD(
    CONSTRAINT FK_Equ FOREIGN KEY (DNI_Pres) REFERENCES Presidente(DNI),
    NumTitulos INT
);
ALTER TABLE Jugador ADD(
    CONSTRAINT CH_jug CHECK (Posicion IN('Centrocampista','Portero','Delantero','Defensa')),
    CONSTRAINT CH_jug1 CHECK (MONTHS_BETWEEN (FechaAlta,FechaNac) >= 16*12)
);

